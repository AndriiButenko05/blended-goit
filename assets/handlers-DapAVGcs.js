import{a as m}from"./vendor-N5iQpiFS.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))n(c);new MutationObserver(c=>{for(const s of c)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(c){const s={};return c.integrity&&(s.integrity=c.integrity),c.referrerPolicy&&(s.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?s.credentials="include":c.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(c){if(c.ep)return;c.ep=!0;const s=o(c);fetch(c.href,s)}})();const r={categoryList:document.querySelector(".categories"),link:"https://dummyjson.com/products",productList:document.querySelector(".products"),modalProduct:document.querySelector(".modal-product"),modalWindow:document.querySelector(".modal"),modalClose:document.querySelector(".modal__close-btn"),searchForm:document.querySelector(".search-form"),clearBtn:document.querySelector(".search-form__btn-clear"),input:document.querySelector(".search-form__input"),notFound:document.querySelector(".not-found"),addToCart:document.querySelector(".modal-product__btn--cart"),addToWishlist:document.querySelector(".modal-product__btn--wishlist"),cartCount:document.querySelector(".nav__count"),cartList:document.querySelector(".products"),itemCountCart:document.querySelector(".cart-summary__value"),itemCostCart:document.querySelector(".price_total"),addToWishlist:document.querySelector(".modal-product__btn--wishlist"),wishlistCount:document.querySelector("[data-wishlist-count]"),scrollUpBtn:document.getElementById("scrollUpBtn"),changeTheme:document.querySelector(".switch .input")},u="cart";let a=[];const y="currentProductId",L="currentProductPrice",p="price",i=[],h="wishlist",d=[],C="currentWishlist",f="currentTheme";async function v(t){try{localStorage.setItem(y,t)}catch(e){alert(e)}}async function O(t){try{localStorage.setItem(L,t)}catch(e){alert(e)}}async function q(t){try{localStorage.setItem(C,t)}catch(e){alert(e)}}function I(){try{return localStorage.getItem(y)}catch(t){return alert(t),null}}function P(){try{return localStorage.getItem(L)}catch(t){return alert(t),null}}function W(){try{return localStorage.getItem(C)}catch(t){return alert(t),null}}function N(t){a.includes(localStorage.getItem(y))?t.textContent="Remove from Cart":t.textContent="Add to Cart"}function F(t){d.includes(localStorage.getItem(C))?t.textContent="Remove from Wishlist":t.textContent="Add to Wishlist"}function b(){try{const t=JSON.parse(localStorage.getItem(u))||[];a.length=0,r.cartCount.textContent=0,t.forEach(e=>{a.push(e)}),r.cartCount.textContent=a.length,window.location.pathname.endsWith("cart.html")&&(r.itemCountCart.textContent=a.length)}catch(t){alert(t)}}function x(){try{const t=JSON.parse(localStorage.getItem(p))||[];i.length=0;let e=0;r.itemCostCart.textContent="$0",t.forEach(o=>{const n=parseInt(o);i.push(n),e+=n}),r.itemCostCart.textContent=`$${Number.parseFloat(e).toFixed(2)}`}catch(t){alert(t)}}function D(){try{const t=JSON.parse(localStorage.getItem(p))||[];i.length=0,t.forEach(e=>{i.push(e)})}catch(t){alert(t)}}function Y(){try{const t=JSON.parse(localStorage.getItem(h))||[];d.length=0,r.wishlistCount.textContent=0,t.forEach(e=>{d.push(e)}),r.wishlistCount.textContent=d.length}catch(t){alert(t)}}function z(){localStorage.getItem(f)==="dark"?(document.body.classList.add("body-dark-theme"),r.changeTheme&&(r.changeTheme.checked=!0)):(document.body.classList.remove("body-dark-theme"),r.changeTheme&&(r.changeTheme.checked=!1))}async function M(){const t=r.link;return await m(`${t}/category-list`)}async function J(){const e=r.link;return await m(`${e}?limit=12&skip=${0*12}`)}async function E(t){const e=r.link;return await m(`${e}/category/${t}`)}async function S(t){const e=r.link;return await m(`${e}/${t}`)}async function $(t){const e=r.link;return await m(`${e}/search?q=${t}&limit=12`)}function H(t){return t.map(e=>`<li class="categories__item">
   <button class="categories__btn" type="button">${e}</button>
 </li>`).join("")}function g(t){return t.map(({id:e,title:o,brand:n,category:c,price:s,images:l})=>`<li class="products__item" data-id="${e}">
    <img class="products__image" src="${l[0]}" alt="${o}"/>
    <p class="products__title">${o}</p>
    <p class="products__category">Category: ${c}</p>
    <p class="products__price">Price: ${s}$</p>
 </li>
`).join("")}function j(t){const{id:e,title:o,price:n,images:c,returnPolicy:s,shippingInformation:l,description:A,tags:k}=t;return`<img class="modal-product__img" src="${c[0]}" alt="${o}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${o}</p>
        <ul class="modal-product__tags">${k}</ul>
        <p class="modal-product__description">${A}</p>
        <p class="modal-product__shipping-information">Shipping: ${l}</p>
        <p class="modal-product__return-policy">Return Policy: ${s}</p>
        <p class="modal-product__price" data-price="${n}">Price: ${n}$</p>
      </div>
`}function B(){const t=JSON.parse(localStorage.getItem(u));!Array.isArray(t)||t.length===0||t.forEach(e=>{S(e).then(o=>{r.cartList.insertAdjacentHTML("beforeend",w(o.data))}).catch(o=>console.log(o.message))})}function w(t){const{id:e,title:o,price:n,images:c,brand:s,category:l}=t;return`<li class="products__item" data-id="${e}">
  <img class="products__image" src="${c[0]}" alt="${o}"/>
  <p class="products__title">${o}</p>
  <p class="products__brand"><span class="products__brand--bold">Brand:${s}</span></p>
  <p class="products__category">Category: ${l}</p>
  <p class="products__price" data-price="${n}">Price: ${n}$</p>
</li>
`}function R(){const t=JSON.parse(localStorage.getItem(h));!Array.isArray(t)||t.length===0||t.forEach(e=>{S(e).then(o=>{r.cartList.insertAdjacentHTML("beforeend",w(o.data))}).catch(o=>console.log(o.message))})}function K(){r.modalWindow.classList.add("modal--is-open")}function _(){r.modalProduct.innerHTML="",r.modalWindow.classList.remove("modal--is-open")}function G(){r.input.value=""}function Q(){M().then(t=>{const e=["All",...t.data];r.categoryList.insertAdjacentHTML("beforeend",H(e))}).catch(t=>alert(t.message))}function T(){J().then(t=>{r.productList.insertAdjacentHTML("beforeend",g(t.data.products))}).catch(t=>alert(t.message))}function V(t){if(!t.target.closest("button"))return;document.querySelectorAll(".categories__btn").forEach(o=>o.classList.remove("categories__btn--active")),t.target.classList.add("categories__btn--active"),t.target.textContent==="All"&&T(),E(t.target.textContent).then(o=>{const n=r.productList;n.innerHTML=g(o.data.products)}).catch(o=>alert(o.message))}function X(t){if(!t.target.closest("li"))return;const e=t.target.closest("li"),o=e.dataset.id,n=e.querySelector(".products__price").textContent,c=parseFloat(n.replace(/[^\d.]/g,""));S(o).then(s=>{v(o),O(c),q(o),K(),r.modalProduct.insertAdjacentHTML("beforeend",j(s.data)),N(r.addToCart),F(r.addToWishlist)}).catch(s=>alert(s.message))}function Z(){_()}function tt(){r.cartList.innerHTML="",B(),_()}function et(){r.cartList.innerHTML="",R(),_()}function rt(t){if(t.preventDefault(),r.input.value.trim()===""){alert("Please write correct product name"),r.searchForm.reset();return}const e=r.input.value.trim();if(r.productList.innerHTML="",document.querySelectorAll(".categories__btn").forEach(n=>n.classList.remove("categories__btn--active")),!window.location.pathname.endsWith("index.html")){localStorage.setItem("pendingSearch",e),window.location.href="index.html";return}$(r.input.value).then(n=>{if(n.data.products.length===0){r.notFound.classList.add("not-found--visible"),r.searchForm.reset();return}r.productList.insertAdjacentHTML("beforeend",g(n.data.products)),r.notFound.classList.remove("not-found--visible")}).catch(n=>alert(n.message)),r.searchForm.reset()}function ot(){const t=localStorage.getItem("pendingSearch");t?(r.input.value=t,localStorage.removeItem("pendingSearch"),r.productList.innerHTML="",$(t).then(e=>{if(e.data.products.length===0){r.notFound.classList.add("not-found--visible"),r.searchForm.reset();return}r.productList.insertAdjacentHTML("beforeend",g(e.data.products)),r.notFound.classList.remove("not-found--visible")}).catch(e=>alert(e.message)),r.searchForm.reset()):T()}function nt(t){const e=parseInt(P()),o=I();if(!o){alert("Error has occurred");return}if(t.target.textContent==="Remove from Cart"){const n=i.indexOf(e);n>-1&&(i.splice(n,1),localStorage.setItem(p,JSON.stringify(i)));const c=a.indexOf(o);if(c>-1){a.splice(c,1),localStorage.setItem(u,JSON.stringify(a)),r.cartCount.textContent--,t.target.textContent="Add to Cart";return}}else t.target.textContent="Remove from Cart",i.push(e),a.push(o),localStorage.setItem(u,JSON.stringify(a)),localStorage.setItem(p,JSON.stringify(i)),r.cartCount.textContent++}function ct(t){const e=I(),o=parseInt(P());if(!e){alert("Error has occurred");return}if(t.target.textContent==="Remove from Cart"){const n=a.indexOf(e),c=i.indexOf(o);if(n>-1){a.splice(n,1),i.splice(c,1),localStorage.setItem(u,JSON.stringify(a)),localStorage.setItem(p,JSON.stringify(i)),r.cartCount.textContent--,t.target.textContent="Add to Cart",x(),b();return}}else t.target.textContent="Remove from Cart",i.push(parseInt(o)),a.push(e),localStorage.setItem(u,JSON.stringify(a)),localStorage.setItem(p,JSON.stringify(i)),r.cartCount.textContent++,b(),x(),r.itemCountCart.textContent=r.cartCount.textContent}function st(t){console.log(r.wishlistCount.textContent);const e=W();if(!e){alert("Error has occurred");return}if(t.target.textContent==="Remove from Wishlist"){const o=d.indexOf(e);if(o>-1){d.splice(o,1),localStorage.setItem(h,JSON.stringify(d)),r.wishlistCount.textContent--,t.target.textContent="Add to Wishlist";return}}else t.target.textContent="Remove from Wishlist",d.push(e),localStorage.setItem(h,JSON.stringify(d)),r.wishlistCount.textContent++}function at(){window.scrollY>300?r.scrollUpBtn.style.display="block":r.scrollUpBtn.style.display="none"}function it(){window.scrollTo({top:0,behavior:"smooth"})}function lt(){r.changeTheme.checked?(document.body.classList.add("body-dark-theme"),localStorage.setItem(f,"dark")):(document.body.classList.remove("body-dark-theme"),localStorage.setItem(f,"light"))}export{z as a,Y as b,D as c,r as d,et as e,G as f,ct as g,X as h,st as i,at as j,it as k,lt as l,Q as m,V as n,Z as o,ot as p,nt as q,R as r,rt as s,x as t,b as u,B as v,tt as w};
//# sourceMappingURL=handlers-DapAVGcs.js.map

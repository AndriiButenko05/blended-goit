import{a as p}from"./vendor-N5iQpiFS.js";const o={categoryList:document.querySelector(".categories"),link:"https://dummyjson.com/products",productList:document.querySelector(".products"),modalProduct:document.querySelector(".modal-product"),modalWindow:document.querySelector(".modal"),modalClose:document.querySelector(".modal__close-btn"),searchForm:document.querySelector(".search-form"),clearBtn:document.querySelector(".search-form__btn-clear"),input:document.querySelector(".search-form__input"),notFound:document.querySelector(".not-found"),addToCart:document.querySelector(".modal-product__btn--cart"),addToWishlist:document.querySelector(".modal-product__btn--wishlist"),cartCount:document.querySelector(".nav__count"),cartList:document.querySelector(".products"),itemCountCart:document.querySelector(".cart-summary__value"),itemCostCart:document.querySelector("[data-price]")};async function v(){const t=o.link;return await p(`${t}/category-list`)}async function $(){const r=o.link;return await p(`${r}?limit=12&skip=${0*12}`)}async function x(t){const r=o.link;return await p(`${r}/category/${t}`)}async function C(t){const r=o.link;return await p(`${r}/${t}`)}async function b(t){const r=o.link;return await p(`${r}/search?q=${t}&limit=12`)}const i="cart";let n=[];const g="currentProductId",u="price",a=[];async function L(t){try{localStorage.setItem(g,t)}catch(r){alert(r)}}function _(){try{return localStorage.getItem(g)}catch(t){return alert(t),null}}function I(t){n.includes(localStorage.getItem(g))?t.textContent="Remove from Cart":t.textContent="Add to Cart"}function f(){try{const t=JSON.parse(localStorage.getItem(i))||[];n.length=0,o.cartCount.textContent=0,t.forEach(r=>{n.push(r)}),o.cartCount.textContent=n.length}catch(t){alert(t)}}function N(){try{const t=JSON.parse(localStorage.getItem(u))||[];a.length=0;let r=0;t.forEach(e=>{const c=parseFloat(e.replace(/[^\d.]/g,""));isNaN(c)||(a.push(c),r+=c)}),o.itemCostCart.textContent=`$${r.toFixed(2)}`}catch(t){alert(t)}}function T(){try{const t=JSON.parse(localStorage.getItem(u))||[];a.length=0,t.forEach(r=>{a.push(r)})}catch(t){alert(t)}}function F(t){return t.map(r=>`<li class="categories__item">
   <button class="categories__btn" type="button">${r}</button>
 </li>`).join("")}function m(t){return t.map(({id:r,title:e,brand:c,category:s,price:l,images:d})=>`<li class="products__item" data-id="${r}">
    <img class="products__image" src="${d[0]}" alt="${e}"/>
    <p class="products__title">${e}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${c}</span></p>
    <p class="products__category">Category: ${s}</p>
    <p class="products__price">Price: ${l}$</p>
 </li>
`).join("")}function k(t){const{id:r,title:e,price:c,images:s,returnPolicy:l,shippingInformation:d,description:h,tags:S}=t;return`<img class="modal-product__img" src="${s[0]}" alt="${e}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${e}</p>
        <ul class="modal-product__tags">${S}</ul>
        <p class="modal-product__description">${h}</p>
        <p class="modal-product__shipping-information">Shipping: ${d}</p>
        <p class="modal-product__return-policy">Return Policy: ${l}</p>
        <p class="modal-product__price" data-price="${c}">Price: ${c}$</p>
      </div>
`}function P(){JSON.parse(localStorage.getItem(i)).forEach(r=>{C(r).then(e=>{o.cartList.insertAdjacentHTML("beforeend",q(e.data))}).catch(e=>console.log(e.message))})}function q(t){const{id:r,title:e,price:c,images:s,brand:l,category:d}=t;return`<li class="products__item" data-id="${r}">
  <img class="products__image" src="${s[0]}" alt="${e}"/>
  <p class="products__title">${e}</p>
  <p class="products__brand"><span class="products__brand--bold">Brand:${l}</span></p>
  <p class="products__category">Category: ${d}</p>
  <p class="products__price" data-price="${c}">Price: ${c}$</p>
</li>
`}function A(){o.modalWindow.classList.add("modal--is-open")}function y(){o.modalProduct.innerHTML="",o.modalWindow.classList.remove("modal--is-open")}function J(t){if(!t.target.closest("button"))return;document.querySelectorAll(".categories__btn").forEach(e=>e.classList.remove("categories__btn--active")),t.target.classList.add("categories__btn--active"),t.target.textContent==="All"&&$().then(e=>{o.productList.insertAdjacentHTML("beforeend",m(e.data.products))}).catch(e=>alert(e.message)),x(t.target.textContent).then(e=>{const c=o.productList;c.innerHTML=m(e.data.products)}).catch(e=>alert(e.message))}function M(t){if(!t.target.closest("li"))return;const r=t.target.closest("li").dataset.id;C(r).then(e=>{L(r),A(),o.modalProduct.insertAdjacentHTML("beforeend",k(e.data)),I(o.addToCart)}).catch(e=>alert(e.message))}function w(){y()}function j(){o.cartList.innerHTML="",P(),o.itemCountCart.textContent=o.cartCount.textContent,y()}function E(t){if(t.preventDefault(),o.productList.innerHTML="",document.querySelectorAll(".categories__btn").forEach(e=>e.classList.remove("categories__btn--active")),o.input.value.trim()===""){alert("Please write correct product name"),o.searchForm.reset();return}b(o.input.value).then(e=>{if(e.data.products.length===0){o.notFound.classList.add("not-found--visible"),o.searchForm.reset();return}o.productList.insertAdjacentHTML("beforeend",m(e.data.products)),o.notFound.classList.remove("not-found--visible")}).catch(e=>alert(e.message)),o.searchForm.reset()}function H(t){const r=document.querySelector(".modal-product__price").textContent,e=_();if(!e){alert("Error has occurred");return}if(t.target.textContent==="Remove from Cart"){const c=a.indexOf(r);c>-1&&(a.splice(c,1),localStorage.setItem(u,JSON.stringify(a)));const s=n.indexOf(e);if(s>-1){n.splice(s,1),localStorage.setItem(i,JSON.stringify(n)),o.cartCount.textContent--,t.target.textContent="Add to Cart";return}}else t.target.textContent="Remove from Cart",a.push(r),n.push(e),localStorage.setItem(i,JSON.stringify(n)),localStorage.setItem(u,JSON.stringify(a)),o.cartCount.textContent++}function R(t){const r=_();if(!r){alert("Error has occurred");return}if(n.indexOf(r),t.target.textContent==="Remove from Cart"){const e=n.indexOf(r),c=a.indexOf(price);if(c>-1&&(a.splice(c,1),localStorage.setItem(u,JSON.stringify(a))),e>-1){n.splice(e,1),localStorage.setItem(i,JSON.stringify(n)),o.cartCount.textContent--,t.target.textContent="Add to Cart",f(),o.itemCountCart.textContent=o.cartCount.textContent;return}}else t.target.textContent="Remove from Cart",n.push(r),localStorage.setItem(i,JSON.stringify(n)),o.cartCount.textContent++,f(),o.itemCountCart.textContent=o.cartCount.textContent}export{F as a,m as b,v as c,T as d,M as e,w as f,H as g,J as h,N as i,P as j,j as k,R as l,$ as p,o as r,E as s,f as u};
//# sourceMappingURL=handlers-DC9O_HoL.js.map

import{a as m}from"./vendor-N5iQpiFS.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();const o={categoryList:document.querySelector(".categories"),link:"https://dummyjson.com/products",productList:document.querySelector(".products"),modalProduct:document.querySelector(".modal-product"),modalWindow:document.querySelector(".modal"),modalClose:document.querySelector(".modal__close-btn"),searchForm:document.querySelector(".search-form"),clearBtn:document.querySelector(".search-form__btn-clear"),input:document.querySelector(".search-form__input"),notFound:document.querySelector(".not-found"),addToCart:document.querySelector(".modal-product__btn--cart"),addToWishlist:document.querySelector(".modal-product__btn--wishlist"),cartCount:document.querySelector(".nav__count"),cartList:document.querySelector(".products"),itemCountCart:document.querySelector(".cart-summary__value"),itemCostCart:document.querySelector(".price_total"),addToWishlist:document.querySelector(".modal-product__btn--wishlist"),wishlistCount:document.querySelector("[data-wishlist-count]"),scrollUpBtn:document.getElementById("scrollUpBtn"),changeTheme:document.querySelector(".switch")},d="cart";let a=[];const h="currentProductId",b="currentProductPrice",p="price",i=[],g="wishlist",u=[],y="currentWishlist";async function A(t){try{localStorage.setItem(h,t)}catch(r){alert(r)}}async function O(t){try{localStorage.setItem(b,t)}catch(r){alert(r)}}async function q(t){try{localStorage.setItem(y,t)}catch(r){alert(r)}}function $(){try{return localStorage.getItem(h)}catch(t){return alert(t),null}}function I(){try{return localStorage.getItem(b)}catch(t){return alert(t),null}}function k(){try{return localStorage.getItem(y)}catch(t){return alert(t),null}}function N(t){a.includes(localStorage.getItem(h))?t.textContent="Remove from Cart":t.textContent="Add to Cart"}function T(t){u.includes(localStorage.getItem(y))?t.textContent="Remove from Wishlist":t.textContent="Add to Wishlist"}function S(){try{const t=JSON.parse(localStorage.getItem(d))||[];a.length=0,o.cartCount.textContent=0,t.forEach(r=>{a.push(r)}),o.cartCount.textContent=a.length,window.location.pathname.endsWith("cart.html")&&(o.itemCountCart.textContent=a.length)}catch(t){alert(t)}}function x(){try{const t=JSON.parse(localStorage.getItem(p))||[];i.length=0;let r=0;o.itemCostCart.textContent="$0",t.forEach(e=>{const c=parseInt(e);i.push(c),r+=c}),o.itemCostCart.textContent=`$${Number.parseFloat(r).toFixed(2)}`}catch(t){alert(t)}}function j(){try{const t=JSON.parse(localStorage.getItem(p))||[];i.length=0,t.forEach(r=>{i.push(r)})}catch(t){alert(t)}}function R(){try{const t=JSON.parse(localStorage.getItem(g))||[];u.length=0,o.wishlistCount.textContent=0,t.forEach(r=>{u.push(r)}),o.wishlistCount.textContent=u.length}catch(t){alert(t)}}async function K(){const t=o.link;return await m(`${t}/category-list`)}async function W(){const r=o.link;return await m(`${r}?limit=12&skip=${0*12}`)}async function v(t){const r=o.link;return await m(`${r}/category/${t}`)}async function C(t){const r=o.link;return await m(`${r}/${t}`)}async function J(t){const r=o.link;return await m(`${r}/search?q=${t}&limit=12`)}function U(t){return t.map(r=>`<li class="categories__item">
   <button class="categories__btn" type="button">${r}</button>
 </li>`).join("")}function f(t){return t.map(({id:r,title:e,brand:c,category:n,price:s,images:l})=>`<li class="products__item" data-id="${r}">
    <img class="products__image" src="${l[0]}" alt="${e}"/>
    <p class="products__title">${e}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${c}</span></p>
    <p class="products__category">Category: ${n}</p>
    <p class="products__price">Price: ${s}$</p>
 </li>
`).join("")}function E(t){const{id:r,title:e,price:c,images:n,returnPolicy:s,shippingInformation:l,description:L,tags:w}=t;return`<img class="modal-product__img" src="${n[0]}" alt="${e}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${e}</p>
        <ul class="modal-product__tags">${w}</ul>
        <p class="modal-product__description">${L}</p>
        <p class="modal-product__shipping-information">Shipping: ${l}</p>
        <p class="modal-product__return-policy">Return Policy: ${s}</p>
        <p class="modal-product__price" data-price="${c}">Price: ${c}$</p>
      </div>
`}function M(){const t=JSON.parse(localStorage.getItem(d));!Array.isArray(t)||t.length===0||t.forEach(r=>{C(r).then(e=>{o.cartList.insertAdjacentHTML("beforeend",P(e.data))}).catch(e=>console.log(e.message))})}function P(t){const{id:r,title:e,price:c,images:n,brand:s,category:l}=t;return`<li class="products__item" data-id="${r}">
  <img class="products__image" src="${n[0]}" alt="${e}"/>
  <p class="products__title">${e}</p>
  <p class="products__brand"><span class="products__brand--bold">Brand:${s}</span></p>
  <p class="products__category">Category: ${l}</p>
  <p class="products__price" data-price="${c}">Price: ${c}$</p>
</li>
`}function F(){const t=JSON.parse(localStorage.getItem(g));!Array.isArray(t)||t.length===0||t.forEach(r=>{C(r).then(e=>{o.cartList.insertAdjacentHTML("beforeend",P(e.data))}).catch(e=>console.log(e.message))})}function B(){o.modalWindow.classList.add("modal--is-open")}function _(){o.modalProduct.innerHTML="",o.modalWindow.classList.remove("modal--is-open")}function D(t){if(!t.target.closest("button"))return;document.querySelectorAll(".categories__btn").forEach(e=>e.classList.remove("categories__btn--active")),t.target.classList.add("categories__btn--active"),t.target.textContent==="All"&&W().then(e=>{o.productList.insertAdjacentHTML("beforeend",f(e.data.products))}).catch(e=>alert(e.message)),v(t.target.textContent).then(e=>{const c=o.productList;c.innerHTML=f(e.data.products)}).catch(e=>alert(e.message))}function Y(t){if(!t.target.closest("li"))return;const r=t.target.closest("li"),e=r.dataset.id,c=r.querySelector(".products__price").textContent,n=parseFloat(c.replace(/[^\d.]/g,""));C(e).then(s=>{A(e),O(n),q(e),B(),o.modalProduct.insertAdjacentHTML("beforeend",E(s.data)),N(o.addToCart),T(o.addToWishlist)}).catch(s=>alert(s.message))}function z(){_()}function G(){o.cartList.innerHTML="",M(),_()}function Q(){o.cartList.innerHTML="",F(),_()}function V(t){if(t.preventDefault(),o.productList.innerHTML="",document.querySelectorAll(".categories__btn").forEach(e=>e.classList.remove("categories__btn--active")),o.input.value.trim()===""){alert("Please write correct product name"),o.searchForm.reset();return}J(o.input.value).then(e=>{if(e.data.products.length===0){o.notFound.classList.add("not-found--visible"),o.searchForm.reset();return}o.productList.insertAdjacentHTML("beforeend",f(e.data.products)),o.notFound.classList.remove("not-found--visible")}).catch(e=>alert(e.message)),o.searchForm.reset()}function X(t){const r=parseInt(I()),e=$();if(!e){alert("Error has occurred");return}if(t.target.textContent==="Remove from Cart"){const c=i.indexOf(r);c>-1&&(i.splice(c,1),localStorage.setItem(p,JSON.stringify(i)));const n=a.indexOf(e);if(n>-1){a.splice(n,1),localStorage.setItem(d,JSON.stringify(a)),o.cartCount.textContent--,t.target.textContent="Add to Cart";return}}else t.target.textContent="Remove from Cart",i.push(r),a.push(e),localStorage.setItem(d,JSON.stringify(a)),localStorage.setItem(p,JSON.stringify(i)),o.cartCount.textContent++}function Z(t){const r=$(),e=parseInt(I());if(!r){alert("Error has occurred");return}if(t.target.textContent==="Remove from Cart"){const c=a.indexOf(r),n=i.indexOf(e);if(c>-1){a.splice(c,1),i.splice(n,1),localStorage.setItem(d,JSON.stringify(a)),localStorage.setItem(p,JSON.stringify(i)),o.cartCount.textContent--,t.target.textContent="Add to Cart",x(),S();return}}else t.target.textContent="Remove from Cart",i.push(parseInt(e)),a.push(r),localStorage.setItem(d,JSON.stringify(a)),localStorage.setItem(p,JSON.stringify(i)),o.cartCount.textContent++,S(),x(),o.itemCountCart.textContent=o.cartCount.textContent}function tt(t){console.log(o.wishlistCount.textContent);const r=k();if(!r){alert("Error has occurred");return}if(t.target.textContent==="Remove from Wishlist"){const e=u.indexOf(r);if(e>-1){u.splice(e,1),localStorage.setItem(g,JSON.stringify(u)),o.wishlistCount.textContent--,t.target.textContent="Add to Wishlist";return}}else t.target.textContent="Remove from Wishlist",u.push(r),localStorage.setItem(g,JSON.stringify(u)),o.wishlistCount.textContent++}function et(){window.scrollY>300?o.scrollUpBtn.style.display="block":o.scrollUpBtn.style.display="none"}function rt(){window.scrollTo({top:0,behavior:"smooth"})}function ot(){document.body.classList.toggle("body-dark-theme")}function nt(){o.input.value=""}export{R as a,j as b,o as c,Q as d,nt as e,Z as f,tt as g,Y as h,et as i,rt as j,ot as k,K as l,U as m,f as n,D as o,W as p,z as q,F as r,V as s,X as t,S as u,x as v,M as w,G as x};
//# sourceMappingURL=helpers-fO8qSOUs.js.map
